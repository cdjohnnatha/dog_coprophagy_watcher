# ------------------------------
# MQTT and Camera Configuration
# ------------------------------

# MQTT_USER / MQTT_PASS:
# Credentials used to connect to your MQTT broker (usually the same
# broker used by Home Assistant and Frigate). Leave blank if authentication
# is not required.

MQTT_USER=your_mqtt_username
MQTT_PASS=your_mqtt_password

# MQTT_HOST / MQTT_PORT:
# Address and port of your MQTT broker.
# Default for Home Assistant add-on (Mosquitto) is usually:
# MQTT_HOST=core-mosquitto
# MQTT_PORT=1883

MQTT_HOST=core-mosquitto
MQTT_PORT=1883

# CAMERA_NAME:
# Name of the camera entity as configured in Frigate.
# Must exactly match the camera name in Frigate’s configuration.yml.

CAMERA_NAME=your_camera_name

# TOILET_ZONE:
# Name of the detection zone in Frigate where defecation events are monitored.
# This must match the “zones:” key defined in Frigate (e.g., toilet_zone).

TOILET_ZONE=your_toilet_zone

# ------------------------------
# Ellie Watcher - Heuristic Tuning Variables
# ------------------------------

# SQUAT_SCORE_THRESH:
# Minimum squat score required to consider that Ellie is lowering her posture.
# Higher = stricter detection (fewer false positives), lower = more sensitive.
# Typical range: 0.55–0.70

#SQUAT_SCORE_THRESH=0.62

# SQUAT_MIN_DURATION_S:
# Minimum duration (in seconds) that the squat posture must persist
# before it is considered a potential defecation event.
# Prevents quick movements from triggering false events.

#SQUAT_MIN_DURATION_S=2.0

# RESIDUE_CONFIRM_WINDOW_S:
# Time window (in seconds) to keep checking the camera after Ellie finishes squatting,
# looking for a new static object (the poop) on the floor.
# Longer windows improve accuracy but increase CPU usage.

#RESIDUE_CONFIRM_WINDOW_S=20

# RESIDUE_MIN_AREA:
# Minimum blob area (in pixels) to consider it as a residue.
# Small blobs (reflections, shadows, small objects) below this area are ignored.

#RESIDUE_MIN_AREA=140

# RESIDUE_STATIC_SEC:
# Minimum time (in seconds) that the detected residue must remain still
# before confirming it as real. Helps filter out temporary artifacts.

#RESIDUE_STATIC_SEC=2.0

# SNAPSHOT_FPS:
# Number of frames per second fetched from Frigate during active monitoring
# (when Ellie is inside the toilet_zone). Affects responsiveness and CPU load.

#SNAPSHOT_FPS=4

# CHECK_INTERVAL_S:
# Interval (in seconds) to periodically recheck the residue ROI
# to determine whether the poop has been removed (cleaned).
# Used while poop_present == true.

#CHECK_INTERVAL_S=15

# ------------------------------
# Dataset Processing Configuration
# ------------------------------

# DATASET_PATH:
# Path to the root directory containing the processed dataset.
# This directory should contain subdirectories for each class (e.g., poop/, not_poop/, coprophagy/).

#DATASET_PATH=ellie_dataset/processed

# CLASSES:
# Comma-separated list of class names (subdirectories) in the dataset.
# These correspond to the folders containing video files for each category.

#CLASSES=poop,not_poop,coprophagy

# MANIFEST_FILENAME:
# Name of the CSV file that will store the dataset manifest.
# Contains paths, labels, and metadata for all videos in the dataset.

#MANIFEST_FILENAME=manifest.csv

# METADATA_FILENAME:
# Name of the CSV file containing video metadata (durations, etc.)
# Generated by the ffmpeg processing script.

#METADATA_FILENAME=metadata_out.csv

# VAL_MANIFEST_FILENAME:
# Name of the validation manifest CSV file used for model evaluation.
# Typically generated by the dataset splitting script.

#VAL_MANIFEST_FILENAME=manifest_val.csv

# VIDEO_EXTENSION:
# File extension for video files in the dataset (without the dot).
# Used when scanning directories for video files.

#VIDEO_EXTENSION=.mp4

# RANDOM_SEED:
# Random seed used for reproducible dataset splitting.
# Ensures consistent train/val/test splits across runs.

#RANDOM_SEED=42

# TRAIN_SPLIT, VAL_SPLIT, TEST_SPLIT:
# Proportions of the dataset to allocate to training, validation, and test sets.
# Values should sum to 1.0. Typical values: 0.6, 0.2, 0.2

#TRAIN_SPLIT=0.6
#VAL_SPLIT=0.2
#TEST_SPLIT=0.2

# VIDEO_FPS:
# Target frames per second for processed videos.
# Used in optical flow analysis to calculate movement durations.

#VIDEO_FPS=8.0

# Optical Flow Parameters (for motion analysis)
# -------------------------------------------

# FLOW_WIN:
# Window size for optical flow calculation.
# Larger windows are more stable but less sensitive to small movements.

#FLOW_WIN=15

# FLOW_LVL:
# Number of pyramid levels for optical flow computation.
# Higher levels handle larger motions but increase computation time.

#FLOW_LVL=2

# FLOW_ITER:
# Number of iterations for optical flow refinement.
# More iterations improve accuracy but increase processing time.

#FLOW_ITER=3

# FLOW_LOW_MAG:
# Threshold for low movement magnitude in optical flow.
# Values below this threshold are considered "still" frames.
# Typical range: 0.3-0.8

#FLOW_LOW_MAG=0.6

# FLOW_LOW_RATIO_GATE:
# Minimum ratio of low-movement frames required.
# Used as a gate for determining overall stillness of video segments.
# Typical range: 0.5-0.8

#FLOW_LOW_RATIO_GATE=0.65